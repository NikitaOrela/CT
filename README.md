ЛР 1 
Лабораторная работа 1


1.	Установим  Nginx(веб-сервер, который будет обрабатывать HTTP/HTTPS запросы), OpenSSL(инструмент для создания SSL-сертификатов, необходимых для HTTPS-шифрования) и создадим структуру директорий(/var/www/project_1, /var/www/project_1):

<img width="405" height="38" alt="image" src="https://github.com/user-attachments/assets/aee47706-960d-4b93-9696-53d656b2e430" />

 
 
2.	Создаем SSL-сертификаты:

  
 
.key - приватный ключ (хранится секретно)
.crt - публичный сертификат (передается клиентам)











3.	Настраиваем виртуальные хосты:
  
listen 80 - слушает HTTP-запросы на порту 80
return 301 - постоянное перенаправление на HTTPS
listen 443 ssl - слушает HTTPS-запросы с SSL
ssl_certificate - указывает на созданные сертификаты
Alias - перенаправляет запросы с одного пути на другой
Проксирование добавил с помощью ии и не до конца разобрался как использовать и убрал из финальной версии 

4.	Создаем тестовые проекты:
1)
  
 

2)
  
 

Сначала хотел разбить два проекта, чтобы в первом был статический текстовый файл, а во второй json, но не получилось, поэтому решил сделать два текствовых.
5.	Добавляем локальные домены:
 
6.	Запускаем и проверяем:

 
Мы столкнулись с ошибкой, что nginx не может найти SSL-сертификаты. Это потому, что я создал сертификаты в /usr/local/etc/nginx/ssl/, а nginx ищет их в /opt/homebrew/etc/nginx/ssl/.
Переместим сертификаты из /usr/local/etc/nginx/ssl/ в /opt/homebrew/etc/nginx/ssl/:

 

  
Успешно проверяем конфигурацию

 
Видим что происходит редирект на безопасное соединение, но при этом:
 

Тк сертификат подписан не доверенным центром сертификации, то браузер выдает предупреждение это норма для самоподписанного сертификата

7.	Проверка работы проектов:  

  
Вывод:
HTTPS с сертификатами - работает на порту 443
HTTP → HTTPS редирект - порт 80 перенаправляет на 443
Alias для путей - /static/ корректно работает
Виртуальные хосты - project-1.local и project-2.local работают независимо
Корректное отображение контента

 
ЛР 1* 
Со звездочкой

Проверим на уязвимости сайт https://gymnasium642.spb.ru/

1. Path Traversal (Обход пути):

Описание уязвимости: Попытка доступа к файлам за пределами корневой директории веб-сервера
Методы проверки:
curl "https://gymnasium642.spb.ru/../../../etc/passwd"
curl "https://gymnasium642.spb.ru/..%2f..%2f..%2fetc%2fpasswd"

 
<title>Страница не найдена</title>
 

Результаты:
Все запросы возвращают ошибки 404 или 400
Сервер корректно обрабатывает попытки обхода пути

Вывод:  Уязвимость не обнаружена

2. Перебор скрытых ресурсов с помощью FFUF:

Описание уязвимости: Поиск скрытых директорий и файлов

Метод проверки:
ffuf -u "https://gymnasium642.spb.ru/FUZZ" -w ~/Desktop/CT/baza.txt -fc 403,404
Взял базу для проверки из интернета
 

Найденные ресурсы:
users/login (Status: 200) - страница входа
user (Status: 200) - пользовательская страница
?wsdl (Status: 200) - WSDL веб-сервиса
Числовые страницы: 9, 11, 2 (Status: 200)
Несколько компонентов с перенаправлениями (301)

Дополнительная проверка:

curl "https://gymnasium642.spb.ru/users/login"
curl "https://gymnasium642.spb.ru/?wsdl"

 



Результаты:

Страница /users/login доступна, но требует аутентификации 

WSDL endpoint недоступен (таймаут)
Числовые страницы возвращают контент, но не раскрывают критической информации
 

Вывод:  Частично успешно - найдены скрытые ресурсы, но без критичного доступа


3. Анализируем файл robots.txt:
 

Найденные интересные пути:
/my/ - вероятно, папка с личными кабинетами или админкой
/thumb/ - система генерации превью изображений
/d/ - директория с файлами


Проверим указанные пути из файла:

curl "https://gymnasium642.spb.ru/my/"
curl "https://gymnasium642.spb.ru/thumb/"
curl "https://gymnasium642.spb.ru/d/"

 
Результаты:

Все пути возвращают 404 Not Found
Система не раскрывает содержимое защищенных директорий

Вывод:  Уязвимость не обнаружена

4. Проверка конфигурационных файлов:

 

Результаты:

Все пути возвращают 404 Not Found

Вывод:  Уязвимость не обнаружена


Общий вывод:

Высокая безопасность
Корректная настройка NGINX
Защита от Path Traversal атак
Соблюдение правил robots.txt
Отсутствие открытых конфигурационных файлов
<img width="454" height="34" alt="image" src="https://github.com/user-attachments/assets/11bd0516-2dec-45d5-a395-c056004cc5b6" />
